<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.zipdoc.dev.mapper.PasteMapper">

	<!-- paste 등록 -->
	<insert id="insertPaste" parameterType="RequestVo">
		INSERT INTO tb_paste (
			pasteUrl,
			pasteText,
			pasteExpiration,
			expireDt,
			pasteNameTitle
		)VALUES(
			#{data.pasteVo.pasteUrl},
			#{data.pasteVo.pasteText},
			#{data.pasteVo.pasteExpiration},
			#{data.pasteVo.expireDt},
			#{data.pasteVo.pasteNameTitle}
		)
	</insert>

	<!-- 등록된 paste 조회 -->
	<select id="selectPaste" parameterType="String" resultType="PasteVo">
		SELECT pasteSeqNo,
			   pasteText,
			   pasteExpiration,
			   expireDt,
			   pasteNameTitle,
			   pasteUrl,
			   delYn,
			   regDt,
			   edtDt
		  FROM tb_paste
		 WHERE pasteUrl = #{pasteUrl}
		   AND delYn = 0
		   AND DATE(expireDt) >= now()
	</select>

	<!-- paste 삭제 처리 -->
	<update id="deletePaste" parameterType="Long">
		UPDATE tb_paste
		  SET delYn = 1,
		      edtDt = NOW()
		WHERE pasteSeqNo = #{pasteSeqNo}
	</update>
</mapper>
